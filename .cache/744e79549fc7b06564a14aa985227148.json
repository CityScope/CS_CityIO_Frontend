{"dependencies":[{"name":"/Volumes/WORK/GIT/17_CS_cityIO_Frontend/package.json","includedInParent":true,"mtime":1523925118628},{"name":"/Volumes/WORK/GIT/17_CS_cityIO_Frontend/node_modules/@compone/define/package.json","includedInParent":true,"mtime":1523925102770},{"name":"@compone/class","loc":{"line":1,"column":24}},{"name":"@compone/event","loc":{"line":2,"column":22}},{"name":"utilise/client","loc":{"line":3,"column":23}}],"generated":{"js":"const classed = require('@compone/class')\r\n    , event = require('@compone/event')\r\n    , client = require('utilise/client')\r\n    , noop = () => {}\r\n    , HTMLElement = client && window.HTMLElement || class {}\r\n    , registry = client && window.customElements || {}\r\n\r\nmodule.exports = function define(name, component) {\r\n  if (arguments.length == 1) { component = name, name = `anon-${registry.anon++}` }\r\n  if (component.hasOwnProperty('wrapper')) return component.wrapper\r\n  if (!name.includes('-')) return;\r\n  if (!client) return wrap(classed(component))\r\n  let wrapped = registry.get(name)\r\n\r\n  if (wrapped) {\r\n    if (wrapped.class == classed(component)) return wrapped\r\n    wrapped.class = classed(component)\r\n    const instances = Array.from(document.querySelectorAll(name))\r\n    instances.map(node => { // TODO: should probably await these\r\n      node.disconnectedCallback() \r\n      node.methods.map(method => { delete node[method] })\r\n      node.connectedCallback()\r\n    })\r\n  } else {\r\n    registry.define(name, wrapped = wrap(classed(component)))\r\n  }\r\n\r\n  return wrapped\r\n}\r\n\r\nconst wrap = component => {\r\n  if (!component.hasOwnProperty('wrapper'))\r\n    component.wrapper = class extends HTMLElement {\r\n      connectedCallback(){ \r\n        const { prototype } = component.wrapper.class\r\n        event(this)\r\n        this.ready = this.once('ready')\r\n        this.state = this.state || {}\r\n        this.methods = Object\r\n          .getOwnPropertyNames(prototype)\r\n          .filter(method => !(method in disallowed))\r\n          .map(method => ((this[method] = prototype[method].bind(this)), method))\r\n\r\n        return Promise.resolve((this.connected || noop).call(this, this, this.state))\r\n          .then(d => {\r\n            this.emit('ready')\r\n            return this.render()\r\n          })\r\n      }\r\n\r\n      render(){\r\n        const { prototype } = component.wrapper.class\r\n        return this.pending = this.pending || this.ready\r\n          .then(() => { \r\n            delete this.pending\r\n            return prototype.render.call(this, this, this.state)\r\n          })\r\n      }\r\n\r\n      disconnectedCallback(){\r\n        (this.disconnected || noop).call(this, this, this.state)\r\n        this.dispatchEvent(new CustomEvent('disconnected')) \r\n        this.initialised = false\r\n      }\r\n\r\n      get(sel){\r\n        return this.querySelector(sel)\r\n      }\r\n    }\r\n\r\n  component.wrapper.class = component\r\n  return component.wrapper\r\n}\r\n\r\nconst disallowed = { length: 1, prototype: 1, name: 1, render: 1 }\r\n\r\nregistry.anon = registry.anon || 1","map":{"mappings":[{"source":"node_modules/@compone/define/index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":2,"column":0},"generated":{"line":2,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":3,"column":0},"generated":{"line":3,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":4,"column":0},"generated":{"line":4,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":5,"column":0},"generated":{"line":5,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":6,"column":0},"generated":{"line":6,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":7,"column":0},"generated":{"line":7,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":8,"column":0},"generated":{"line":8,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":9,"column":0},"generated":{"line":9,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":10,"column":0},"generated":{"line":10,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":11,"column":0},"generated":{"line":11,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":12,"column":0},"generated":{"line":12,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":13,"column":0},"generated":{"line":13,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":14,"column":0},"generated":{"line":14,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":15,"column":0},"generated":{"line":15,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":16,"column":0},"generated":{"line":16,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":17,"column":0},"generated":{"line":17,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":18,"column":0},"generated":{"line":18,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":19,"column":0},"generated":{"line":19,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":20,"column":0},"generated":{"line":20,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":21,"column":0},"generated":{"line":21,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":22,"column":0},"generated":{"line":22,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":23,"column":0},"generated":{"line":23,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":24,"column":0},"generated":{"line":24,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":25,"column":0},"generated":{"line":25,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":26,"column":0},"generated":{"line":26,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":27,"column":0},"generated":{"line":27,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":28,"column":0},"generated":{"line":28,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":29,"column":0},"generated":{"line":29,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":30,"column":0},"generated":{"line":30,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":31,"column":0},"generated":{"line":31,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":32,"column":0},"generated":{"line":32,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":33,"column":0},"generated":{"line":33,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":34,"column":0},"generated":{"line":34,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":35,"column":0},"generated":{"line":35,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":36,"column":0},"generated":{"line":36,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":37,"column":0},"generated":{"line":37,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":38,"column":0},"generated":{"line":38,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":39,"column":0},"generated":{"line":39,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":40,"column":0},"generated":{"line":40,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":41,"column":0},"generated":{"line":41,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":42,"column":0},"generated":{"line":42,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":43,"column":0},"generated":{"line":43,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":44,"column":0},"generated":{"line":44,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":45,"column":0},"generated":{"line":45,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":46,"column":0},"generated":{"line":46,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":47,"column":0},"generated":{"line":47,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":48,"column":0},"generated":{"line":48,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":49,"column":0},"generated":{"line":49,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":50,"column":0},"generated":{"line":50,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":51,"column":0},"generated":{"line":51,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":52,"column":0},"generated":{"line":52,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":53,"column":0},"generated":{"line":53,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":54,"column":0},"generated":{"line":54,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":55,"column":0},"generated":{"line":55,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":56,"column":0},"generated":{"line":56,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":57,"column":0},"generated":{"line":57,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":58,"column":0},"generated":{"line":58,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":59,"column":0},"generated":{"line":59,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":60,"column":0},"generated":{"line":60,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":61,"column":0},"generated":{"line":61,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":62,"column":0},"generated":{"line":62,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":63,"column":0},"generated":{"line":63,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":64,"column":0},"generated":{"line":64,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":65,"column":0},"generated":{"line":65,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":66,"column":0},"generated":{"line":66,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":67,"column":0},"generated":{"line":67,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":68,"column":0},"generated":{"line":68,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":69,"column":0},"generated":{"line":69,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":70,"column":0},"generated":{"line":70,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":71,"column":0},"generated":{"line":71,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":72,"column":0},"generated":{"line":72,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":73,"column":0},"generated":{"line":73,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":74,"column":0},"generated":{"line":74,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":75,"column":0},"generated":{"line":75,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":76,"column":0},"generated":{"line":76,"column":0}},{"source":"node_modules/@compone/define/index.js","original":{"line":77,"column":0},"generated":{"line":77,"column":0}}],"sources":{"node_modules/@compone/define/index.js":"const classed = require('@compone/class')\r\n    , event = require('@compone/event')\r\n    , client = require('utilise/client')\r\n    , noop = () => {}\r\n    , HTMLElement = client && window.HTMLElement || class {}\r\n    , registry = client && window.customElements || {}\r\n\r\nmodule.exports = function define(name, component) {\r\n  if (arguments.length == 1) { component = name, name = `anon-${registry.anon++}` }\r\n  if (component.hasOwnProperty('wrapper')) return component.wrapper\r\n  if (!name.includes('-')) return;\r\n  if (!client) return wrap(classed(component))\r\n  let wrapped = registry.get(name)\r\n\r\n  if (wrapped) {\r\n    if (wrapped.class == classed(component)) return wrapped\r\n    wrapped.class = classed(component)\r\n    const instances = Array.from(document.querySelectorAll(name))\r\n    instances.map(node => { // TODO: should probably await these\r\n      node.disconnectedCallback() \r\n      node.methods.map(method => { delete node[method] })\r\n      node.connectedCallback()\r\n    })\r\n  } else {\r\n    registry.define(name, wrapped = wrap(classed(component)))\r\n  }\r\n\r\n  return wrapped\r\n}\r\n\r\nconst wrap = component => {\r\n  if (!component.hasOwnProperty('wrapper'))\r\n    component.wrapper = class extends HTMLElement {\r\n      connectedCallback(){ \r\n        const { prototype } = component.wrapper.class\r\n        event(this)\r\n        this.ready = this.once('ready')\r\n        this.state = this.state || {}\r\n        this.methods = Object\r\n          .getOwnPropertyNames(prototype)\r\n          .filter(method => !(method in disallowed))\r\n          .map(method => ((this[method] = prototype[method].bind(this)), method))\r\n\r\n        return Promise.resolve((this.connected || noop).call(this, this, this.state))\r\n          .then(d => {\r\n            this.emit('ready')\r\n            return this.render()\r\n          })\r\n      }\r\n\r\n      render(){\r\n        const { prototype } = component.wrapper.class\r\n        return this.pending = this.pending || this.ready\r\n          .then(() => { \r\n            delete this.pending\r\n            return prototype.render.call(this, this, this.state)\r\n          })\r\n      }\r\n\r\n      disconnectedCallback(){\r\n        (this.disconnected || noop).call(this, this, this.state)\r\n        this.dispatchEvent(new CustomEvent('disconnected')) \r\n        this.initialised = false\r\n      }\r\n\r\n      get(sel){\r\n        return this.querySelector(sel)\r\n      }\r\n    }\r\n\r\n  component.wrapper.class = component\r\n  return component.wrapper\r\n}\r\n\r\nconst disallowed = { length: 1, prototype: 1, name: 1, render: 1 }\r\n\r\nregistry.anon = registry.anon || 1"},"lineCount":77}},"hash":"27d13ffc5272ad7574ed6de59998472a","cacheData":{"env":{}}}